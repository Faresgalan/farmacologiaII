<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cuestionario Interactivo #1 â€“ FÃ¡rmacos Antivirales (v2)</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{--bg:#0f172a;--card:#111827;--ink:#e5e7eb;--muted:#9ca3af;--accent:#22d3ee;--bad:#ef4444;--good:#22c55e}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:linear-gradient(180deg,#0b1220,#0f172a);color:var(--ink)}
    .wrap{max-width:960px;margin:32px auto;padding:24px}
    header{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;margin-bottom:20px}
    h1{font-size:clamp(20px,3vw,28px);margin:0;letter-spacing:.2px}
    .meta{color:var(--muted);font-size:14px}
    .card{background:rgba(17,24,39,.8);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;margin:14px 0}
    .q{display:grid;gap:12px}
    .q-title{font-weight:700}
    .opts{display:grid;gap:8px;margin-top:6px}
    .opt{display:flex;gap:10px;align-items:flex-start;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);padding:10px 12px;border-radius:12px;cursor:pointer}
    .opt input{margin-top:3px}
    .opt span{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
    .fillin{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.2);color:var(--ink)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;margin-top:16px}
    button{background:var(--accent);border:none;color:#00232c;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    button.secondary{background:transparent;color:var(--ink);border:1px solid rgba(255,255,255,.15)}
    .result{margin-top:14px;padding:12px 14px;border-radius:12px;background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.35)}
    .bad{background:rgba(239,68,68,.12);border-color:rgba(239,68,68,.35)}
    .badge{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.18);color:var(--muted)}
    .explain{color:var(--muted);font-size:13px;margin-top:8px}
    .correct{outline:2px solid var(--good)}
    .incorrect{outline:2px solid var(--bad)}
    footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}
    noscript{display:block;margin-top:12px;color:#fecaca;background:#7f1d1d;padding:10px;border-radius:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Cuestionario Interactivo #1 â€“ FÃ¡rmacos Antivirales</h1>
        <div class="meta">PRACTICA</div>
      </div>
      <div class="badge" id="badgeCount"></div>
    </header>

    <noscript>Este cuestionario requiere JavaScript habilitado.</noscript>
    <div id="quiz" aria-live="polite"></div>

    <div class="actions" role="group" aria-label="acciones">
      <button id="grade">Calificar</button>
      <button class="secondary" id="reset">Reiniciar</button>
      <button class="secondary" id="reveal">Mostrar respuestas</button>
    </div>

    <div id="summary" aria-live="polite"></div>

    <footer>
      <p>Tip: La Dra. enfatiza <strong>dosis + duraciÃ³n</strong>. Revisa con atenciÃ³n 3, 6, 16 y 19.</p>
    </footer>
  </div>

<script>
// ==== PREGUNTAS (4â€“20) ====
const QUESTIONS = [
    {id:1,type:'mcq',q:'1. Son los fÃ¡rmacos utilizados para el tratamiento de enfermedades herpÃ©ticas:',
      opts:[
        {t:'Aciclovir, valaciclovir, cidofovir, famciclovir, penciclovir, ganciclovir, valganciclovir, foscarnet, fomivirsen, docosanol, idoxuridina, trifluridina', correct:true},
        {t:'Aciclovir, valaciclovir, famciclovir, ganciclovir, valganciclovir, docosanol, trifluridina, albendazol, nitazoxanida, salbutamol, tetraciclina, amiodarona'},
        {t:'Penciclovir, docosanol, idoxuridina, trifluridina, amantadina, rimantadina, linezolida, pentamidina, tricabendazol, somatropina, dapsona, daptomicina'},
        {t:'Ganciclovir, valganciclovir, cidofovir, foscarnet, oseltamivir, zanamivir, carvedilol, doxiciclina, ciprofloxacina, sulfixozasol, neuramidasa'}]},
  //2
    {id:2,type:'mcq',q:'2. Â¿CuÃ¡l es el mecanismo de acciÃ³n del aciclovir?',
      opts:[
        {t:'Inhibe la sÃ­ntesis del ADN viral al bloquear la ADN polimerasa viral', correct:true},
        {t:'Bloqueo de la neuraminidasa viral en la membrana polipeptidica de fase replicativa'},
        {t:'InhibiciÃ³n de la proteÃ­na M2 (canal iÃ³nico) en el nucleo de el virion'},
        {t:'InhibiciÃ³n de la transcriptasa inversa'}]},
  //3
  {id:3, type:'mcq',q:'3. Dosis del aciclovir y valaciclovir en infecciones genitales iniciales',
      opts:[
        {t:'Aciclovir 200 mg 5/dÃ­a x 7â€“10 dÃ­as; Valaciclovir 1000 mg c/12 h x 7â€“10 dÃ­as', correct:true},
        {t:'Aciclovir 400 mg c/12h o 400 mg 3/dÃ­a x 5 dÃ­as; Valaciclovir 500 mg c/12 h x 5 dÃ­as'},
        {t:'Aciclovir 800 mg c8h por 14 dÃ­as; Valaciclovir 1500 mg una vez al dÃ­a por 10 dÃ­as'},
        {t:'Aciclovir 200 mg c/12h por 7 dÃ­as; Valaciclovir 500 mg una vez/dÃ­a por 7 dÃ­as'}]},
  // 4
  { id:4, type:'mcq', q:'4. EA de Aciclovir y Valaciclovir',
    opts:[
      'Aciclovir: irritaciÃ³n, GI, nefro/neurotoxicidad. Valaciclovir: GI, cefalea, SNC, trombocitopenia.',
      'Aciclovir: GI, cefalea, rash leve. Valaciclovir: GI, mareo, SNC, alteraciÃ³n hepÃ¡tica.',
      'Aciclovir: cefalea, prurito, fatiga. Valaciclovir: GI, insomnio, erupciÃ³n cutÃ¡nea, cefalea.',
      'Aciclovir: GI, visiÃ³n borrosa, fiebre. Valaciclovir: GI, cefalea, leve hepatotoxicidad, nÃ¡useas.'
    ],
    correct:0
  },
  // 5
  { id:5, type:'mcq', q:'5. Cidofovir â€“ Usos y EA',
    opts:[
      'Usos: CMV, HSV resistente, verrugas/NIC. EA: nefrotoxicidad, irritaciÃ³n, potencial cancerÃ­geno.',
      'Usos: HSV, CMV, adenovirus. EA: GI, fiebre, nefrotoxicidad leve.',
      'Usos: CMV, HSV ocular, varicela. EA: prurito, GI, alteraciÃ³n hepÃ¡tica.',
      'Usos: CMV, HSV resistente, verrugas. EA: cefalea, nefrotoxicidad, mareo.'
    ],
    correct:0
  },
  // 6
  { id:6, type:'mcq', q:'6. Famciclovir â€“ Dosis',
    opts:[
      '250 mg cada 8 h por 7â€“10 dÃ­as',
      '200 mg cada 6 h por 10 dÃ­as',
      '400 mg cada 12 h por 5 dÃ­as',
      '500 mg cada 8 h por 7 dÃ­as'
    ],
    correct:0
  },
  // 7
  { id:7, type:'mcq', q:'7. Ganciclovir â€“ Efectos adversos',
    opts:[
      'EA: mielosupresiÃ³n, anemia, GI, leve hepato.',
      'EA: leucopenia, cefalea, GI, leve rash.',
      'EA: anemia, GI, fiebre, leve nefro.',
      'EA: trombocitopenia, GI, cefalea, leve hepato.'
    ],
    correct:0
  },
  // 8
  { id:8, type:'mcq', q:'8. Foscarnet â€“ Usos terapÃ©uticos',
    opts:[
      'Usos: CMV, HSV/VZV resistentes, Kaposi VIH.',
      'Usos: CMV, HSV ocular, adenovirus, EBV.',
      'Usos: HSV, influenza A, VZV, mononucleosis.',
      'Usos: CMV, HSV, hepatitis, varicela.'
    ],
    correct:0
  },
  // 9
  { id:9, type:'mcq', q:'9. Foscarnet â€“ Efectos adversos',
    opts:[
      'EA: nefrotoxicidad, hipoCa, hipoMg/K, cefalea, convulsiones.',
      'EA: nefrotoxicidad leve, rash, insomnio, cefalea.',
      'EA: GI, hipocalcemia, fiebre, parestesias.',
      'EA: hipocalcemia, GI leves, mareo, prurito.'
    ],
    correct:0
  },
  // 10
  { id:10, type:'mcq', q:'10. CMV â€“ FÃ¡rmacos Ãºtiles',
    opts:[
      'Cidofovir, Fomivirsen, Ganciclovir, Valganciclovir, Foscarnet, Interferones.',
      'Ganciclovir, Valganciclovir, Cidofovir, Ribavirina, Interferones, Remdesivir.',
      'Foscarnet, Cidofovir, Ganciclovir, Zanamivir, Valaciclovir, Interferones.',
      'Valganciclovir, Fomivirsen, Oseltamivir, Ribavirina, Cidofovir, Foscarnet.'
    ],
    correct:0
  },
  // 11
  { id:11, type:'mcq', q:'11. Influenza â€“ FÃ¡rmacos',
    opts:[
      'Amantadina, Rimantadina, Oseltamivir, Zanamivir, Peramivir, Interferones.',
      'Rimantadina, Oseltamivir, Zanamivir, Foscarnet, Cidofovir, Interferones.',
      'Oseltamivir, Zanamivir, Peramivir, Amantadina, Foscarnet, Ribavirina.',
      'Amantadina, Rimantadina, Cidofovir, Famciclovir, Peramivir, Interferones.'
    ],
    correct:0
  },
  // 12
  { id:12, type:'mcq', q:'12. Amantadina / Rimantadina â€“ Mecanismo de acciÃ³n',
    opts:[
      'Bloquean M2 â†’ impiden desnudamiento viral.',
      'Inhiben neuraminidasa â†’ evitan liberaciÃ³n viral.',
      'Inhiben polimerasa â†’ reducen replicaciÃ³n viral.',
      'Inhiben fusiÃ³n â†’ limitan entrada celular.'
    ],
    correct:0
  },
  // 13
  { id:13, type:'mcq', q:'13. Amantadina / Rimantadina â€“ Usos terapÃ©uticos',
    opts:[
      'Previenen y tratan influenza A; brotes hospitalarios.',
      'Previenen influenza B; profilaxis varicela.',
      'Tratan influenza A/B; prevenciÃ³n HSV.',
      'Previenen hepatitis A; control varicela.'
    ],
    correct:0
  },
  // 14
  { id:14, type:'mcq', q:'14. Amantadina / Rimantadina â€“ Efectos adversos',
    opts:[
      'EA: nerviosismo, insomnio, GI, delirio, convulsiones, arritmias.',
      'EA: cefalea, insomnio, GI leves, somnolencia, visiÃ³n borrosa.',
      'EA: GI, mareo, ansiedad, nÃ¡useas, rash leve.',
      'EA: fatiga, alteraciÃ³n hepÃ¡tica, cefalea, vÃ©rtigo, hipoNa.'
    ],
    correct:0
  },
  // 15
  { id:15, type:'mcq', q:'15. Oseltamivir â€“ Mecanismo de acciÃ³n',
    opts:[
      'Inhibe neuraminidasa â†’ bloquea diseminaciÃ³n viral.',
      'Bloquea canal M2 â†’ impide ensamblaje viral.',
      'Inhibe polimerasa â†’ detiene replicaciÃ³n viral.',
      'Interfiere adhesiÃ³n â†’ limita infecciÃ³n viral.'
    ],
    correct:0
  },
  // 16
  { id:16, type:'mcq', q:'16. Oseltamivir â€“ Usos',
    opts:[
      'Tratamiento y profilaxis de influenza A y B.',
      'Tratamiento influenza A y prevenciÃ³n RSV.',
      'Profilaxis influenza B y varicela.',
      'PrevenciÃ³n de hepatitis y resfriado viral.'
    ],
    correct:0
  },
  // 17
  { id:17, type:'mcq', q:'17. Zanamivir â€“ Usos y vÃ­a',
    opts:[
      'Influenza A/B; profilaxis familiar; vÃ­a inhalatoria.',
      'Influenza B/CMV; tratamiento hospital; vÃ­a IV.',
      'Influenza A/VZV; prevenciÃ³n; vÃ­a oral.',
      'Influenza A/B; profilaxis nasal; vÃ­a tÃ³pica.'
    ],
    correct:0
  },
  // 18
  { id:18, type:'mcq', q:'18. Zanamivir â€“ Efectos adversos',
    opts:[
      'EA: broncoespasmo, sibilancias, disnea leve.',
      'EA: tos seca, GI leves, cefalea leve.',
      'EA: fiebre, mareo, disnea leve.',
      'EA: tos leve, rinorrea, GI leves.'
    ],
    correct:0
  },
  // 19
  { id:19, type:'mcq', q:'19. Peramivir â€“ Efectos adversos',
    opts:[
      'EA: diarrea leve (>2%).',
      'EA: GI leves, cefalea, insomnio, rash.',
      'EA: nÃ¡useas, vÃ³mitos, mareo, fiebre.',
      'EA: GI, artralgia, prurito, visiÃ³n borrosa.'
    ],
    correct:0
  },
  // 20
  { id:20, type:'mcq', q:'20. Interferones â€“ Usos terapÃ©uticos',
    opts:[
      'HBV/HCV, condilomas, Kaposi, EM, HSV.',
      'HBV, HSV, influenza, EBV, varicela.',
      'CMV, dengue, VIH, HPV, influenza.',
      'HCV, HBV, HPV, mono, sarampiÃ³n.'
    ],
    correct:0
  }
];

// === Utilidades
function shuffle(arr){const a=arr.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
const ABC=['a','b','c','d','e','f'];
function normalize(s){return (s||'').toString().trim().toLowerCase().replace(/\s+/g,' ')}

const quizEl=document.getElementById('quiz');
const badge=document.getElementById('badgeCount');
badge.textContent = `${QUESTIONS.length} preguntas`;

function render(){
  quizEl.innerHTML='';
  QUESTIONS.forEach((q)=>{
    const card=document.createElement('div');
    card.className='card q';
    const title=document.createElement('div');
    title.className='q-title';
    title.textContent=q.q;
    card.appendChild(title);

    if(q.type==='mcq'){
      const optsEl=document.createElement('div');
      optsEl.className='opts';

      // ðŸ‘‡ Normaliza opciones: soporte para strings u objetos,
      // y marca cuÃ¡l es correcta ANTES de mezclar.
      const normalized = q.opts.map((opt,i)=>{
        if(typeof opt === 'string'){
          return { t: opt, correct: i === q.correct };
        } else {
          // ya viene como {t, correct}
          return { t: opt.t, correct: !!opt.correct || i === q.correct };
        }
      });

      const mixed=shuffle(normalized);

      mixed.forEach((opt,idx)=>{
        const label=document.createElement('label');
        label.className='opt';
        const input=document.createElement('input');
        input.type='radio';
        input.name='q'+q.id;
        if(opt.correct) input.dataset.correct='true';
        label.appendChild(input);
        const span=document.createElement('span');
        span.textContent=`${ABC[idx]}) ${opt.t}`;
        span.title=opt.t;
        label.appendChild(span);
        optsEl.appendChild(label);
      });
      card.appendChild(optsEl);
    }
    else if(q.type==='vf'){
      const opts=document.createElement('div');
      opts.className='opts';
      ['Verdadero','Falso'].forEach((txt,idx)=>{
        const label=document.createElement('label');
        label.className='opt';
        const input=document.createElement('input');
        input.type='radio';
        input.name='q'+q.id;
        if((q.correct||'').toLowerCase()===txt.toLowerCase()) input.dataset.correct='true';
        label.appendChild(input);
        const span=document.createElement('span');
        span.textContent=`${ABC[idx]}) ${txt}`;
        label.appendChild(span);
        opts.appendChild(label);
      });
      card.appendChild(opts);
    }
    else if(q.type==='fill'){
      const inp=document.createElement('input');
      inp.className='fillin';
      inp.placeholder='Escribe la(s) palabra(s) exacta(s)';
      inp.name='q'+q.id;
      card.appendChild(inp);
    }
    quizEl.appendChild(card);
  });
}

render();

// === Calificar
document.getElementById('grade').addEventListener('click',()=>{
  const cards=[...document.querySelectorAll('.card')];
  let correct=0;
  cards.forEach((card,idx)=>{
    const q=QUESTIONS[idx];
    card.querySelectorAll('.opt, .fillin').forEach(el=>el.classList.remove('correct','incorrect'));
    const prev=card.querySelector('.result'); if(prev) prev.remove();
    let ok=false;
    if(q.type==='mcq' || q.type==='vf'){
      const chosen=card.querySelector('input:checked');
      const labels=card.querySelectorAll('.opt');
      labels.forEach(l=>{const inp=l.querySelector('input'); if(inp.dataset.correct==='true') l.classList.add('correct');});
      if(chosen){ if(chosen.dataset.correct==='true') ok=true; else chosen.closest('.opt').classList.add('incorrect'); }
    } else if(q.type==='fill'){
      const inp=card.querySelector('input.fillin');
      const ans=normalize(inp.value);
      const target=Array.isArray(q.correct)? q.correct.map(normalize): [normalize(q.correct)];
      if(target.some(t=>t===ans)) { ok=true; inp.classList.add('correct'); } else { inp.classList.add('incorrect'); }
    }
    if(ok) correct++;
    const res=document.createElement('div');
    res.className='result ' + (ok? '' : 'bad');
    res.textContent= ok? 'âœ” Correcto' : 'âœ˜ Incorrecto';
    card.appendChild(res);
  });
  const sum=document.getElementById('summary');
  sum.innerHTML=`<div class="card"><strong>PuntuaciÃ³n:</strong> ${correct} / ${QUESTIONS.length} (${Math.round(correct/QUESTIONS.length*100)}%)</div>`;
});

// Reiniciar
document.getElementById('reset').addEventListener('click',()=>{
  render();
  document.getElementById('summary').innerHTML='';
  window.scrollTo({top:0,behavior:'smooth'});
});

// Mostrar respuestas
document.getElementById('reveal').addEventListener('click',()=>{
  const cards=[...document.querySelectorAll('.card')];
  cards.forEach((card)=>{
    const correctInput=card.querySelector('input[data-correct=true]');
    if(correctInput) correctInput.checked=true;
    card.querySelectorAll('.opt').forEach(l=>{
      const inp=l.querySelector('input');
      if(inp.dataset.correct==='true') l.classList.add('correct');
    });
  });
});
</script>
</body>
</html>
